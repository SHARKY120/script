-- Hapus loading screen sebelumnya jika ada
pcall(function()
    if game.CoreGui:FindFirstChild("FullBlueLoadingScreen") then
        game.CoreGui.FullBlueLoadingScreen:Destroy()
    end
end)

local TweenService = game:GetService("TweenService")

-- Buat ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FullBlueLoadingScreen"
screenGui.IgnoreGuiInset = true
screenGui.ResetOnSpawn = false
screenGui.Parent = game:GetService("CoreGui")

-- Background biru fullscreen
local background = Instance.new("Frame")
background.Size = UDim2.new(1, 0, 1, 0)
background.Position = UDim2.new(0, 0, 0, 0)
background.BackgroundColor3 = Color3.fromRGB(0, 102, 204)
background.BorderSizePixel = 0
background.Parent = screenGui

-- Teks credit di atas
local creatorText = Instance.new("TextLabel")
creatorText.Size = UDim2.new(1, 0, 0.05, 0)
creatorText.Position = UDim2.new(0, 0, 0.23, 0)
creatorText.BackgroundTransparency = 1
creatorText.Text = "Spawner by: Jekak121"
creatorText.TextColor3 = Color3.fromRGB(255, 255, 255)
creatorText.Font = Enum.Font.SourceSansBold
creatorText.TextScaled = true
creatorText.Parent = background

-- Teks utama
local loadingText = Instance.new("TextLabel")
loadingText.Size = UDim2.new(1, 0, 0.1, 0)
loadingText.Position = UDim2.new(0, 0, 0.3, 0)
loadingText.BackgroundTransparency = 1
loadingText.Text = "Loading Script"
loadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
loadingText.Font = Enum.Font.SourceSansBold
loadingText.TextScaled = true
loadingText.Parent = background

-- Progress bar
local progressBarBg = Instance.new("Frame")
progressBarBg.Size = UDim2.new(0.6, 0, 0.05, 0)
progressBarBg.Position = UDim2.new(0.2, 0, 0.5, 0)
progressBarBg.BackgroundColor3 = Color3.fromRGB(20, 20, 80)
progressBarBg.BorderSizePixel = 0
progressBarBg.ClipsDescendants = true
progressBarBg.Parent = background

local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0, 0, 1, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(0, 153, 255)
progressBar.BorderSizePixel = 0
progressBar.Parent = progressBarBg

-- Credit Teks di progress bar
local creditText = Instance.new("TextLabel")
creditText.Size = UDim2.new(1, 0, 1, 0)
creditText.BackgroundTransparency = 1
creditText.Text = "Tiktok: @Jekak121"
creditText.TextColor3 = Color3.fromRGB(255, 255, 255)
creditText.Font = Enum.Font.SourceSansBold
creditText.TextScaled = true
creditText.Parent = progressBarBg

-- Persentase
local percentText = Instance.new("TextLabel")
percentText.Size = UDim2.new(0, 60, 0.05, 0)
percentText.Position = UDim2.new(0.81, 10, 0.5, 0)
percentText.BackgroundTransparency = 1
percentText.Text = "0%"
percentText.TextColor3 = Color3.fromRGB(255, 255, 255)
percentText.Font = Enum.Font.SourceSansBold
percentText.TextScaled = true
percentText.Parent = background

-- Status text
local statusText = Instance.new("TextLabel")
statusText.Size = UDim2.new(1, 0, 0.05, 0)
statusText.Position = UDim2.new(0, 0, 0.57, 0)
statusText.BackgroundTransparency = 1
statusText.Text = "Initializing..."
statusText.TextColor3 = Color3.fromRGB(240, 240, 240)
statusText.Font = Enum.Font.SourceSans
statusText.TextScaled = true
statusText.Parent = background

local statuses = {
    "Getting server data...",
    "Finding best server...",
    "Verifying session...",
    "Loading environment...",
    "Finalizing..."
}

task.spawn(function()
    local i = 1
    while screenGui and screenGui.Parent do
        statusText.Text = statuses[i]
        i = (i % #statuses) + 1
        wait(5)
    end
end)

TweenService:Create(progressBar, TweenInfo.new(30, Enum.EasingStyle.Linear), {
    Size = UDim2.new(1, 0, 1, 0)
}):Play()

task.spawn(function()
    for i = 1, 30 do
        percentText.Text = tostring(math.floor(i / 30 * 100)) .. "%"
        wait(1)
    end
    percentText.Text = "100%"
end)

delay(30, function()
    screenGui:Destroy()

    -- GUI utama Spawner
    local gui = Instance.new("ScreenGui", game.CoreGui)
    gui.Name = "SpawnerFloatingWindow"
    gui.ResetOnSpawn = false

    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0, 300, 0, 200)
    frame.Position = UDim2.new(0.5, -150, 0.5, -100)
    frame.BackgroundColor3 = Color3.fromRGB(0, 102, 204)
    frame.Active = true
    frame.Draggable = true -- draggable GUI
    frame.Selectable = true

    local title = Instance.new("TextLabel", frame)
    title.Size = UDim2.new(1, 0, 0.15, 0)
    title.Text = "Spawner"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Font = Enum.Font.SourceSansBold
    title.TextScaled = true
    title.BackgroundTransparency = 1

    local petBtn = Instance.new("TextButton", frame)
    petBtn.Size = UDim2.new(0.5, -5, 0.2, 0)
    petBtn.Position = UDim2.new(0, 5, 0.2, 0)
    petBtn.Text = "Pet Spawner"
    petBtn.Font = Enum.Font.SourceSansBold
    petBtn.TextScaled = true
    petBtn.BackgroundColor3 = Color3.fromRGB(0, 153, 255)
    petBtn.TextColor3 = Color3.fromRGB(255, 255, 255)

    local seedBtn = petBtn:Clone()
    seedBtn.Text = "Seed Spawner"
    seedBtn.Position = UDim2.new(0.5, 5, 0.2, 0)
    seedBtn.Parent = frame

    -- Popup sukses function
    local function showPopup(msg)
        local popup = Instance.new("TextLabel", gui)
        popup.Size = UDim2.new(0, 300, 0, 50)
        popup.Position = UDim2.new(0.5, -150, 0.1, 0)
        popup.BackgroundColor3 = Color3.fromRGB(0, 200, 100)
        popup.TextColor3 = Color3.fromRGB(255, 255, 255)
        popup.Font = Enum.Font.SourceSansBold
        popup.TextScaled = true
        popup.Text = msg
        popup.BackgroundTransparency = 0
        popup.BorderSizePixel = 0

        delay(3, function()
            popup:Destroy()
        end)
    end

    local function createForm(name)
        local form = Instance.new("Frame", frame)
        form.Size = UDim2.new(1, -20, 0.4, 0)
        form.Position = UDim2.new(0, 10, 0.45, 0)
        form.BackgroundTransparency = 1
        form.Visible = false

        local nameLabel = Instance.new("TextLabel", form)
        nameLabel.Size = UDim2.new(0.4, 0, 0.3, 0)
        nameLabel.Text = name .. " Name:"
        nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        nameLabel.Font = Enum.Font.SourceSansBold
        nameLabel.TextScaled = true
        nameLabel.BackgroundTransparency = 1

        local nameInput = Instance.new("TextBox", form)
        nameInput.Size = UDim2.new(0.6, 0, 0.3, 0)
        nameInput.Position = UDim2.new(0.4, 0, 0, 0)
        nameInput.Font = Enum.Font.SourceSansBold
        nameInput.TextScaled = true
        nameInput.Text = ""
        nameInput.BackgroundColor3 = Color3.fromRGB(200, 220, 255)

        local spawnBtn = Instance.new("TextButton", form)
        spawnBtn.Size = UDim2.new(1, 0, 0.3, 0)
        spawnBtn.Position = UDim2.new(0, 0, 0.7, 0)
        spawnBtn.Text = "Spawn"
        spawnBtn.BackgroundColor3 = Color3.fromRGB(0, 153, 255)
        spawnBtn.TextColor3 = Color3.fromRGB(255, 255, 255)

        spawnBtn.MouseButton1Click:Connect(function()
            local nama = nameInput.Text
            if nama ~= "" then
                showPopup('Successfully to Spawn "' .. nama .. '"!! Check your Inventory')
                -- Tambahkan logika spawn sesuai game jika perlu
            end
        end)

        return form
    end

    local petForm = createForm("Pet")
    petForm.Parent = frame

    local seedForm = createForm("Seed")
    seedForm.Parent = frame

    petBtn.MouseButton1Click:Connect(function()
        petForm.Visible = true
        seedForm.Visible = false
    end)

    seedBtn.MouseButton1Click:Connect(function()
        seedForm.Visible = true
        petForm.Visible = false
    end)
end)
