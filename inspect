-- Sharky GUI Inspector - Optimized Refresh, Anti Lag, Real-Time, Scrollable

local player = game.Players.LocalPlayer
local guiTargets = {
    player:FindFirstChild("PlayerGui"),
    game.CoreGui,
    game:GetService("StarterGui")
}

-- Hapus GUI lama jika ada
local old = game.CoreGui:FindFirstChild("SharkyLagFreeInspector")
if old then old:Destroy() end

-- GUI tampilan utama
local screenGui = Instance.new("ScreenGui", game.CoreGui)
screenGui.Name = "SharkyLagFreeInspector"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- ScrollFrame
local scrollingFrame = Instance.new("ScrollingFrame", screenGui)
scrollingFrame.Size = UDim2.new(0, 500, 0, 360)
scrollingFrame.Position = UDim2.new(0, 10, 0, 10)
scrollingFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
scrollingFrame.BackgroundTransparency = 0.2
scrollingFrame.BorderSizePixel = 0
scrollingFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
scrollingFrame.ScrollBarThickness = 8
scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
scrollingFrame.ClipsDescendants = true

-- Layout isi
local layout = Instance.new("UIListLayout", scrollingFrame)
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Padding = UDim.new(0, 2)
layout.VerticalAlignment = Enum.VerticalAlignment.Bottom

-- Fungsi scan isi GUI
local function scanGui(obj, indent, lines)
    indent = indent or ""
    lines = lines or {}
    table.insert(lines, indent .. obj.Name .. " [" .. obj.ClassName .. "]")

    if obj:IsA("TextLabel") or obj:IsA("TextButton") then
        table.insert(lines, indent .. "  Text: " .. (obj.Text or "[Kosong]"))
    elseif obj:IsA("ImageLabel") or obj:IsA("ImageButton") then
        table.insert(lines, indent .. "  Image: " .. (obj.Image or "[Kosong]"))
    end

    for _, child in ipairs(obj:GetChildren()) do
        scanGui(child, indent .. "  ", lines)
    end
    return lines
end

-- Bersihkan isi
local function clearOld()
    for _, v in ipairs(scrollingFrame:GetChildren()) do
        if v:IsA("TextLabel") then
            v:Destroy()
        end
    end
end

-- Tambah baris teks
local function addLine(text, color)
    local label = Instance.new("TextLabel", scrollingFrame)
    label.Size = UDim2.new(1, -10, 0, 18)
    label.BackgroundTransparency = 1
    label.Font = Enum.Font.Code
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Text = text
    label.TextColor3 = color or Color3.new(1, 1, 1)
end

-- UPDATE refresh GUI
local function updateInspector()
    clearOld()
    for _, container in ipairs(guiTargets) do
        if container then
            for _, guiObj in ipairs(container:GetChildren()) do
                if guiObj:IsA("ScreenGui") then
                    addLine("ðŸ“¦ GUI: " .. guiObj.Name, Color3.fromRGB(255, 255, 0))
                    local lines = scanGui(guiObj, "  ")
                    for _, line in ipairs(lines) do
                        addLine(line)
                    end
                    addLine("")
                end
            end
        end
    end
end

-- TIMER sistem refresh lambat
local debounce = false
local function slowRefresh()
    if debounce then return end
    debounce = true
    task.delay(1, function()
        debounce = false
    end)
    updateInspector()
end

-- Jalankan awal
updateInspector()

-- Listener untuk update real-time (tapi dibatasi)
for _, container in ipairs(guiTargets) do
    if container then
        container.ChildAdded:Connect(slowRefresh)
        container.ChildRemoved:Connect(slowRefresh)

        for _, guiObj in ipairs(container:GetChildren()) do
            if guiObj:IsA("ScreenGui") then
                guiObj.DescendantAdded:Connect(slowRefresh)
                guiObj.DescendantRemoving:Connect(slowRefresh)
            end
        end
    end
end

print("âœ… Sharky Inspector aktif: Anti Lag, Real-time, Terbaru di Atas, Scrollable")
